<!doctype html><html lang=en-us><head><link rel=preload href=/lib/font-awesome/webfonts/fa-brands-400.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=/lib/font-awesome/webfonts/fa-regular-400.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=/lib/font-awesome/webfonts/fa-solid-900.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=/lib/JetBrainsMono/web/woff2/JetBrainsMono-Regular.woff2 as=font type=font/woff2 crossorigin=anonymous><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><title>On Migrating From WordPress to Octopress | Everything is Gray</title>
<link rel=canonical href=https://everythingisgray.com/2013/06/15/on-migrating-from-wordpress-to-octopress/><meta name=description content="A place to put stuff."><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="all,follow"><meta name=googlebot content="index,follow,snippet,archive"><meta property="og:url" content="https://everythingisgray.com/2013/06/15/on-migrating-from-wordpress-to-octopress/"><meta property="og:site_name" content="Everything is Gray"><meta property="og:title" content="On Migrating From WordPress to Octopress"><meta property="og:description" content="Having recently made the decision to migrate my blog from WordPress to Octopress I decided I would share my findings in hopes that someone else will benefit from them, and so I can refer back to this post should I need to do something similar in the future.
The primary reason I decided to move to a statically generated site is because I found myself spending more time worrying about whether my site was running and was secure than I did writing. My site was hacked last year because I was running an outdated version of WordPress, and since moving to a new host, (Amazon EC2), I have frequently had to restart MySQL and Apache just to keep the site up. This could be partially due to the fact that I was running the site on a micro instance, but now that my blog is static I don’t have to worry about that any longer. Another reason why I chose Octopress for my blogging platform is that I like to tinker, and being able to use tools that I’m already familiar with and use every day was a huge plus, (Vim, Git, and Markdown, specifically)."><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="post"><meta property="article:published_time" content="2013-06-15T00:00:00+00:00"><meta property="article:modified_time" content="2020-10-18T23:44:37-04:00"><meta property="article:tag" content="Web Development"><meta property="article:tag" content="Octopress"><meta property="article:tag" content="WordPress"><meta name=twitter:card content="summary"><meta name=twitter:title content="On Migrating From WordPress to Octopress"><meta name=twitter:description content="Having recently made the decision to migrate my blog from WordPress to Octopress I decided I would share my findings in hopes that someone else will benefit from them, and so I can refer back to this post should I need to do something similar in the future.
The primary reason I decided to move to a statically generated site is because I found myself spending more time worrying about whether my site was running and was secure than I did writing. My site was hacked last year because I was running an outdated version of WordPress, and since moving to a new host, (Amazon EC2), I have frequently had to restart MySQL and Apache just to keep the site up. This could be partially due to the fact that I was running the site on a micro instance, but now that my blog is static I don’t have to worry about that any longer. Another reason why I chose Octopress for my blogging platform is that I like to tinker, and being able to use tools that I’m already familiar with and use every day was a huge plus, (Vim, Git, and Markdown, specifically)."><link rel=stylesheet href=/css/style.min.338e2bac4a86fea13fc9163b1b421ee9ad433fce699e1148e9b10a3858e25908.css integrity="sha256-M44rrEqG/qE/yRY7G0Ie6a1DP85pnhFI6bEKOFjiWQg=" crossorigin=anonymous><!--[if lt IE 9]><script src=https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js></script><script src=https://oss.maxcdn.com/respond/1.4.2/respond.min.js></script><![endif]--><link rel=apple-touch-icon sizes=180x180 href=https://everythingisgray.com/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=https://everythingisgray.com/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=https://everythingisgray.com/favicon-16x16.png><link rel=manifest href=https://everythingisgray.com/site.webmanifest><link rel=mask-icon href=https://everythingisgray.com/safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#da532c"><meta name=theme-color content="#ffffff"><script async src="https://www.googletagmanager.com/gtag/js?id=G-7FEYPKH74D"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-7FEYPKH74D")}</script></head><body class="max-width mx-auto px3 ltr"><div class="content index py4"><div id=header-post><a id=menu-icon href=#><i class="fas fa-bars fa-lg"></i></a>
<a id=menu-icon-tablet href=#><i class="fas fa-bars fa-lg"></i></a>
<a id=top-icon-tablet href=# onclick='$("html, body").animate({scrollTop:0},"fast")' style=display:none aria-label="Top of Page"><i class="fas fa-chevron-up fa-lg"></i></a>
<span id=menu><span id=nav><ul><li><a href=/>Home</a></li><li><a href=/about/>About</a></li><li><a href=/post/>Blog</a></li><li><a href=/projects/>Projects</a></li><li><a href=/research/>Research</a></li><li><a href=/talks/>Talks</a></li></ul></span><br><span id=actions><ul><li><a class=icon href=https://everythingisgray.com/2010/08/19/how-i-use-automator-to-post-images-to-tumblr/ aria-label=Previous><i class="fas fa-chevron-left" aria-hidden=true onmouseover='$("#i-prev").toggle()' onmouseout='$("#i-prev").toggle()'></i></a></li><li><a class=icon href=https://everythingisgray.com/2013/06/16/curl-speed-test/ aria-label=Next><i class="fas fa-chevron-right" aria-hidden=true onmouseover='$("#i-next").toggle()' onmouseout='$("#i-next").toggle()'></i></a></li><li><a class=icon href=# onclick='$("html, body").animate({scrollTop:0},"fast")' aria-label="Top of Page"><i class="fas fa-chevron-up" aria-hidden=true onmouseover='$("#i-top").toggle()' onmouseout='$("#i-top").toggle()'></i></a></li><li><a class=icon href=# aria-label=Share><i class="fas fa-share-alt" aria-hidden=true onmouseover='$("#i-share").toggle()' onmouseout='$("#i-share").toggle()' onclick='return $("#share").toggle(),!1'></i></a></li></ul><span id=i-prev class=info style=display:none>Previous post</span>
<span id=i-next class=info style=display:none>Next post</span>
<span id=i-top class=info style=display:none>Back to top</span>
<span id=i-share class=info style=display:none>Share post</span></span><br><div id=share style=display:none><ul><li><a class=icon href="http://www.facebook.com/sharer.php?u=https%3a%2f%2feverythingisgray.com%2f2013%2f06%2f15%2fon-migrating-from-wordpress-to-octopress%2f" aria-label=Facebook><i class="fab fa-facebook" aria-hidden=true></i></a></li><li><a class=icon href="https://twitter.com/share?url=https%3a%2f%2feverythingisgray.com%2f2013%2f06%2f15%2fon-migrating-from-wordpress-to-octopress%2f&text=On%20Migrating%20From%20WordPress%20to%20Octopress" aria-label=Twitter><i class="fab fa-twitter" aria-hidden=true></i></a></li><li><a class=icon href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2feverythingisgray.com%2f2013%2f06%2f15%2fon-migrating-from-wordpress-to-octopress%2f&title=On%20Migrating%20From%20WordPress%20to%20Octopress" aria-label=Linkedin><i class="fab fa-linkedin" aria-hidden=true></i></a></li><li><a class=icon href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2feverythingisgray.com%2f2013%2f06%2f15%2fon-migrating-from-wordpress-to-octopress%2f&is_video=false&description=On%20Migrating%20From%20WordPress%20to%20Octopress" aria-label=Pinterest><i class="fab fa-pinterest" aria-hidden=true></i></a></li><li><a class=icon href="mailto:?subject=On%20Migrating%20From%20WordPress%20to%20Octopress&body=Check out this article: https%3a%2f%2feverythingisgray.com%2f2013%2f06%2f15%2fon-migrating-from-wordpress-to-octopress%2f" aria-label=Email><i class="fas fa-envelope" aria-hidden=true></i></a></li><li><a class=icon href="https://getpocket.com/save?url=https%3a%2f%2feverythingisgray.com%2f2013%2f06%2f15%2fon-migrating-from-wordpress-to-octopress%2f&title=On%20Migrating%20From%20WordPress%20to%20Octopress" aria-label=Pocket><i class="fab fa-get-pocket" aria-hidden=true></i></a></li><li><a class=icon href="http://reddit.com/submit?url=https%3a%2f%2feverythingisgray.com%2f2013%2f06%2f15%2fon-migrating-from-wordpress-to-octopress%2f&title=On%20Migrating%20From%20WordPress%20to%20Octopress" aria-label=reddit><i class="fab fa-reddit" aria-hidden=true></i></a></li><li><a class=icon href="http://www.tumblr.com/share/link?url=https%3a%2f%2feverythingisgray.com%2f2013%2f06%2f15%2fon-migrating-from-wordpress-to-octopress%2f&name=On%20Migrating%20From%20WordPress%20to%20Octopress&description=%3cp%3eHaving%20recently%20made%20the%20decision%20to%20migrate%20my%20blog%20from%20WordPress%20to%20%3ca%20href%3d%22http%3a%2f%2foctopress.org%2f%22%3eOctopress%3c%2fa%3e%20I%20decided%20I%20would%20share%20my%20findings%20in%20hopes%20that%20someone%20else%20will%20benefit%20from%20them%2c%20and%20so%20I%20can%20refer%20back%20to%20this%20post%20should%20I%20need%20to%20do%20something%20similar%20in%20the%20future.%3c%2fp%3e%0a%3cp%3eThe%20primary%20reason%20I%20decided%20to%20move%20to%20a%20statically%20generated%20site%20is%20because%20I%20found%20myself%20spending%20more%20time%20worrying%20about%20whether%20my%20site%20was%20running%20and%20was%20secure%20than%20I%20did%20writing.%20My%20site%20was%20hacked%20last%20year%20because%20I%20was%20running%20an%20outdated%20version%20of%20WordPress%2c%20and%20since%20moving%20to%20a%20new%20host%2c%20%28Amazon%20EC2%29%2c%20I%20have%20frequently%20had%20to%20restart%20MySQL%20and%20Apache%20just%20to%20keep%20the%20site%20up.%20This%20could%20be%20partially%20due%20to%20the%20fact%20that%20I%20was%20running%20the%20site%20on%20a%20%3ca%20href%3d%22http%3a%2f%2fdocs.aws.amazon.com%2fAWSEC2%2flatest%2fUserGuide%2fconcepts_micro_instances.html%22%3emicro%20instance%3c%2fa%3e%2c%20but%20now%20that%20my%20blog%20is%20static%20I%20don%26rsquo%3bt%20have%20to%20worry%20about%20that%20any%20longer.%20Another%20reason%20why%20I%20chose%20Octopress%20for%20my%20blogging%20platform%20is%20that%20I%20like%20to%20tinker%2c%20and%20being%20able%20to%20use%20tools%20that%20I%26rsquo%3bm%20already%20familiar%20with%20and%20use%20every%20day%20was%20a%20huge%20plus%2c%20%28Vim%2c%20Git%2c%20and%20Markdown%2c%20specifically%29.%3c%2fp%3e" aria-label=Tumblr><i class="fab fa-tumblr" aria-hidden=true></i></a></li><li><a class=icon href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2feverythingisgray.com%2f2013%2f06%2f15%2fon-migrating-from-wordpress-to-octopress%2f&t=On%20Migrating%20From%20WordPress%20to%20Octopress" aria-label="Hacker News"><i class="fab fa-hacker-news" aria-hidden=true></i></a></li></ul></div><div id=toc><nav id=TableOfContents><ul><li><a href=#prepping-your-environment>Prepping Your Environment</a></li><li><a href=#setting-up-your-local-sites-directory-and-installing-octopress>Setting Up Your Local ~/Sites Directory and Installing Octopress</a></li><li><a href=#use-rack-rewrite-for-redirects>Use rack-rewrite for Redirects</a></li><li><a href=#create-_heroku-directory-for-deployment>Create _heroku Directory for Deployment</a></li><li><a href=#signing-up-for-and-configuring-heroku>Signing up for and Configuring Heroku</a></li><li><a href=#exporting-your-wordpress-posts-and-comments>Exporting your WordPress Posts and Comments</a></li><li><a href=#importing-your-wordpress-data-into-your-octopress-site>Importing your WordPress data into your Octopress Site</a></li><li><a href=#remove-blog-from-octopress-url>Remove /blog/ from Octopress URL</a></li><li><a href=#change-author-name-after-importing-from-wordpress>Change Author Name After Importing from WordPress</a></li><li><a href=#using-google-fonts>Using Google Fonts</a></li><li><a href=#prevent-comment-text-from-wrapping-on-small-screens>Prevent Comment Text from Wrapping on Small Screens</a></li><li><a href=#404>404</a></li><li><a href=#fancybox>Fancybox</a></li><li><a href=#open-vim-when-running-rake-new_post-and-make-new-posts-un-published-by-default>Open Vim when running rake new_post and make new posts un-published by default</a></li><li><a href=#finalize-dns>Finalize DNS</a></li></ul></nav></div></span></div><article class=post itemscope itemtype=http://schema.org/BlogPosting><header><h1 class=posttitle itemprop="name headline">On Migrating From WordPress to Octopress</h1><hr><div class=meta><div class=postdate>Posted by</div><span class=author itemprop=author itemscope itemtype=http://schema.org/Person><span itemprop=name><a href=/about/>James Barclay</a></span></span><div class=postdate>on
<time datetime="2013-06-15 00:00:00 +0000 UTC" itemprop=datePublished>2013-06-15</time>
(Updated: <time datetime="2020-10-18 23:44:37 -0400 -0400" itemprop=dateModified>2020-10-18</time>)</div><div class=article-read-time><i class="far fa-clock"></i>
9 minute read</div><div class=article-category><i class="fas fa-archive"></i>
<a class=category-link href=/categories/web-development>Web Development</a>, <a class=category-link href=/categories/octopress>Octopress</a>, <a class=category-link href=/categories/wordpress>WordPress</a></div><div class=article-tag><i class="fas fa-tag"></i>
<a class=tag-link href=/tags/web-development rel=tag>Web Development</a>, <a class=tag-link href=/tags/octopress rel=tag>Octopress</a>, <a class=tag-link href=/tags/wordpress rel=tag>WordPress</a></div></div></header><hr><div class=content itemprop=articleBody><p>Having recently made the decision to migrate my blog from WordPress to <a href=http://octopress.org/>Octopress</a> I decided I would share my findings in hopes that someone else will benefit from them, and so I can refer back to this post should I need to do something similar in the future.</p><p>The primary reason I decided to move to a statically generated site is because I found myself spending more time worrying about whether my site was running and was secure than I did writing. My site was hacked last year because I was running an outdated version of WordPress, and since moving to a new host, (Amazon EC2), I have frequently had to restart MySQL and Apache just to keep the site up. This could be partially due to the fact that I was running the site on a <a href=http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/concepts_micro_instances.html>micro instance</a>, but now that my blog is static I don&rsquo;t have to worry about that any longer. Another reason why I chose Octopress for my blogging platform is that I like to tinker, and being able to use tools that I&rsquo;m already familiar with and use every day was a huge plus, (Vim, Git, and Markdown, specifically).</p><p>So, without further ado<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup>, here are the steps I took to mirgrate from WordPress running on an Amazon EC2 instance to Octopress running on Heroku.</p><h2 id=prepping-your-environment>Prepping Your Environment</h2><p>I performed the migration using a fairly stock OS X 10.8 machine. If you&rsquo;re using a Mac, you should probably be using <a href=http://mxcl.github.io/homebrew/>Homebrew</a> to manage packages.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>brew update
</span></span><span style=display:flex><span>brew doctor
</span></span><span style=display:flex><span>brew install rbenv
</span></span></code></pre></div><p>The next thing you should do is add the following to your ~/.bash_profile.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:#75715e># To use Homebrew&#39;s directories rather than ~/.rbenv add to your profile:</span>
</span></span><span style=display:flex><span>export RBENV_ROOT<span style=color:#f92672>=</span>/usr/local/var/rbenv
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># To enable shims and autocompletion add to your profile:</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> which rbenv &gt; /dev/null; <span style=color:#66d9ef>then</span> eval <span style=color:#e6db74>&#34;</span><span style=color:#66d9ef>$(</span>rbenv init -<span style=color:#66d9ef>)</span><span style=color:#e6db74>&#34;</span>; <span style=color:#66d9ef>fi</span>
</span></span></code></pre></div><p>Then <code>source ~/.bash_profile</code>.</p><p>Now install Ruby 1.9.3 with rbenv.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>brew install ruby-build
</span></span><span style=display:flex><span>brew update
</span></span><span style=display:flex><span>brew tap homebrew/dupes
</span></span><span style=display:flex><span>brew install automake apple-gcc42
</span></span><span style=display:flex><span>rbenv install 1.9.3-p194
</span></span><span style=display:flex><span>rbenv rehash
</span></span><span style=display:flex><span>rbenv global 1.9.3-p194
</span></span><span style=display:flex><span>ruby --version <span style=color:#75715e># Should now return 1.9.3</span>
</span></span></code></pre></div><h2 id=setting-up-your-local-sites-directory-and-installing-octopress>Setting Up Your Local ~/Sites Directory and Installing Octopress</h2><p>On OS X 10.8 the ~/Sites folder no longer exists in the home directory by default. No problem though, because we can create it, and we&rsquo;ll even get the correct permissions and pretty icon when we do so.</p><p>I also recommend checking out <a href=http://anvilformac.com/>Anvil</a> for Mac. This will allow you to easily manage your local site and give you a .dev domain for testing. Best of all, it&rsquo;s free.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>mkdir ~/Sites
</span></span><span style=display:flex><span>cd ~/Sites
</span></span><span style=display:flex><span>git clone git://github.com/imathis/octopress.git &lt;sitename&gt;
</span></span><span style=display:flex><span>cd &lt;sitename&gt;
</span></span><span style=display:flex><span>gem install bundler
</span></span><span style=display:flex><span>rbenv rehash
</span></span><span style=display:flex><span>bundle install
</span></span><span style=display:flex><span>rake install
</span></span></code></pre></div><p>If you took my advice and installed <a href=http://anvilformac.com/>Anvil</a> for Mac, do the following to create a symlink to your site in the <code>~/.pow</code> directory.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>cd ~/.pow
</span></span><span style=display:flex><span>ln -s ~/Sites/&lt;sitename&gt; &lt;sitename&gt;
</span></span><span style=display:flex><span>cd -
</span></span><span style=display:flex><span>rake generate <span style=color:#f92672>&amp;&amp;</span> rake watch
</span></span></code></pre></div><h2 id=use-rack-rewrite-for-redirects>Use rack-rewrite for Redirects</h2><p>This is useful for redirecting old URLs to your new Octopress site, especially if you used date-based permalinks for archives on WordPress, (something like example.com/2012/02/22), and you want those to redirect to /archives on your new site.</p><p>Add this to the end of your Gemfile.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=display:flex><span>gem <span style=color:#e6db74>&#39;rack-rewrite&#39;</span>
</span></span></code></pre></div><p>Add this to config.ru.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=display:flex><span>require <span style=color:#e6db74>&#39;rack-rewrite&#39;</span>
</span></span></code></pre></div><p>Under <code>$root = ::File.dirname(__FILE__)</code> in config.ru add your redirects, (these are just some examples). Of particular interest are the regular expressions that redirect dates in yyyy-mm-dd format to /archives.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=display:flex><span>use <span style=color:#66d9ef>Rack</span><span style=color:#f92672>::</span><span style=color:#66d9ef>Rewrite</span> <span style=color:#66d9ef>do</span>
</span></span><span style=display:flex><span>    r301 <span style=color:#e6db74>/.*/</span>,  <span style=color:#66d9ef>Proc</span><span style=color:#f92672>.</span>new {<span style=color:#f92672>|</span>path, rack_env<span style=color:#f92672>|</span> <span style=color:#e6db74>&#34;http://</span><span style=color:#e6db74>#{</span>rack_env<span style=color:#f92672>[</span><span style=color:#e6db74>&#39;SERVER_NAME&#39;</span><span style=color:#f92672>].</span>     gsub(<span style=color:#e6db74>/www\./i</span>, <span style=color:#e6db74>&#39;&#39;</span>) <span style=color:#e6db74>}#{</span>path<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span> },
</span></span><span style=display:flex><span>      <span style=color:#e6db74>:if</span> <span style=color:#f92672>=&gt;</span> <span style=color:#66d9ef>Proc</span><span style=color:#f92672>.</span>new {<span style=color:#f92672>|</span>rack_env<span style=color:#f92672>|</span> rack_env<span style=color:#f92672>[</span><span style=color:#e6db74>&#39;SERVER_NAME&#39;</span><span style=color:#f92672>]</span> <span style=color:#f92672>=~</span> <span style=color:#e6db74>/www\./i</span>}
</span></span><span style=display:flex><span>    r301 <span style=color:#e6db74>%r{^/tag/art/?$}</span>, <span style=color:#e6db74>&#39;/category/art/&#39;</span>
</span></span><span style=display:flex><span>    r301 <span style=color:#e6db74>%r{^/tag/design/?$}</span>, <span style=color:#e6db74>&#39;/category/design/&#39;</span>
</span></span><span style=display:flex><span>    r301 <span style=color:#e6db74>%r{^/tag/os-x/?$}</span>, <span style=color:#e6db74>&#39;/category/os-x/&#39;</span>
</span></span><span style=display:flex><span>    r301 <span style=color:#e6db74>%r{^/tag/science/?$}</span>, <span style=color:#e6db74>&#39;/category/science/&#39;</span>
</span></span><span style=display:flex><span>    r301 <span style=color:#e6db74>%r{^/tag/technology/?$}</span>, <span style=color:#e6db74>&#39;/category/technology/&#39;</span>
</span></span><span style=display:flex><span>    r301 <span style=color:#e6db74>%r{^/tag/uncategorized/?$}</span>, <span style=color:#e6db74>&#39;/category/uncategorized/&#39;</span>
</span></span><span style=display:flex><span>    r301 <span style=color:#e6db74>%r{^/tag/web-design/?$}</span>, <span style=color:#e6db74>&#39;/category/web-design/&#39;</span>
</span></span><span style=display:flex><span>    r301 <span style=color:#e6db74>%r{^/tag/web-development/?$}</span>, <span style=color:#e6db74>&#39;/category/web-development/&#39;</span>
</span></span><span style=display:flex><span>    r301 <span style=color:#e6db74>%r{^/tag/wordpress/?$}</span>, <span style=color:#e6db74>&#39;/category/wordpress/&#39;</span>
</span></span><span style=display:flex><span>    r301 <span style=color:#e6db74>%r{^/[0-9]{4}/(1[0-2]|0[1-9])/(3[01]|[12][0-9]|0[1-9])/?$}</span>, <span style=color:#e6db74>&#39;/archives/&#39;</span>
</span></span><span style=display:flex><span>    r301 <span style=color:#e6db74>%r{^/[0-9]{4}/(1[0-2]|0[1-9])/?$}</span>, <span style=color:#e6db74>&#39;/archives/&#39;</span>
</span></span><span style=display:flex><span>    r301 <span style=color:#e6db74>%r{^/[0-9]{4}/?$}</span>, <span style=color:#e6db74>&#39;/archives/&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>end</span>
</span></span></code></pre></div><p>Install rack-rewrite.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>bundle install
</span></span><span style=display:flex><span>bundle
</span></span><span style=display:flex><span>bundle show rack-rewrite
</span></span><span style=display:flex><span>rake generate <span style=color:#f92672>&amp;&amp;</span> rake watch
</span></span></code></pre></div><p>Now restart your local server, (turn the slider on and off with Anvil).</p><h2 id=create-_heroku-directory-for-deployment>Create _heroku Directory for Deployment</h2><p>I opted to keep the generated Heroku site in a separate repository so I can keep public in my .gitignore. This will help keep your commit history clean, as not (nearly) every file that Git is tracking will change every time you re-generate your site.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>cd ~/Sites/&lt;sitename&gt;
</span></span><span style=display:flex><span>mkdir _heroku
</span></span><span style=display:flex><span>cp config.ru _heroku/
</span></span><span style=display:flex><span>cp Gemfile _heroku/
</span></span><span style=display:flex><span>cd _heroku
</span></span><span style=display:flex><span>mkdir public
</span></span></code></pre></div><p>Create an HTML file in _heroku/public so you can deploy to Heroku.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>touch ~/Sites/&lt;sitename&gt;/_heroku/public/index.html
</span></span><span style=display:flex><span>echo <span style=color:#e6db74>&#39;&lt;html&gt;&lt;p&gt;Hello world.&lt;/p&gt;&lt;/html&gt;&#39;</span> &gt; ~/Sites/&lt;sitename&gt;/_heroku/public/index.html
</span></span></code></pre></div><p>Make the Gemfile in _heroku only include these lines.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=display:flex><span>source <span style=color:#e6db74>&#34;http://rubygems.org&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>gem <span style=color:#e6db74>&#39;sinatra&#39;</span>, <span style=color:#e6db74>&#39;~&gt; 1.4.2&#39;</span>
</span></span><span style=display:flex><span>gem <span style=color:#e6db74>&#39;rack-rewrite&#39;</span>
</span></span></code></pre></div><p>Add this task to your Rakefile. This will result in your site being deployed to Heroku when you type <code>rake deploy</code>. Don&rsquo;t run <code>rake deploy</code> at this time, though, because you haven&rsquo;t set up Heroku yet.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=display:flex><span>desc <span style=color:#e6db74>&#34;Deploy a basic rack app to heroku&#34;</span>
</span></span><span style=display:flex><span>multitask <span style=color:#e6db74>:heroku</span> <span style=color:#66d9ef>do</span>
</span></span><span style=display:flex><span>puts <span style=color:#e6db74>&#34;## Deploying to Heroku&#34;</span>
</span></span><span style=display:flex><span>    (<span style=color:#66d9ef>Dir</span><span style=color:#f92672>[</span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>#{</span>deploy_dir<span style=color:#e6db74>}</span><span style=color:#e6db74>/public/*&#34;</span><span style=color:#f92672>]</span>)<span style=color:#f92672>.</span>each { <span style=color:#f92672>|</span>f<span style=color:#f92672>|</span> rm_rf(f) }
</span></span><span style=display:flex><span>    system <span style=color:#e6db74>&#34;cp config.ru </span><span style=color:#e6db74>#{</span>deploy_dir<span style=color:#e6db74>}</span><span style=color:#e6db74>/&#34;</span>
</span></span><span style=display:flex><span>    system <span style=color:#e6db74>&#34;cp -R </span><span style=color:#e6db74>#{</span>public_dir<span style=color:#e6db74>}</span><span style=color:#e6db74>/* </span><span style=color:#e6db74>#{</span>deploy_dir<span style=color:#e6db74>}</span><span style=color:#e6db74>/public&#34;</span>
</span></span><span style=display:flex><span>    puts <span style=color:#e6db74>&#34;</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>## Copying </span><span style=color:#e6db74>#{</span>public_dir<span style=color:#e6db74>}</span><span style=color:#e6db74> to </span><span style=color:#e6db74>#{</span>deploy_dir<span style=color:#e6db74>}</span><span style=color:#e6db74>/public&#34;</span>
</span></span><span style=display:flex><span>    cd <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>#{</span>deploy_dir<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span> <span style=color:#66d9ef>do</span>
</span></span><span style=display:flex><span>        system <span style=color:#e6db74>&#34;git add .&#34;</span>
</span></span><span style=display:flex><span>        system <span style=color:#e6db74>&#34;git add -u&#34;</span>
</span></span><span style=display:flex><span>        puts <span style=color:#e6db74>&#34;</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>## Committing: Site updated at </span><span style=color:#e6db74>#{</span><span style=color:#66d9ef>Time</span><span style=color:#f92672>.</span>now<span style=color:#f92672>.</span>utc<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>        message <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;Site updated at </span><span style=color:#e6db74>#{</span><span style=color:#66d9ef>Time</span><span style=color:#f92672>.</span>now<span style=color:#f92672>.</span>utc<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>        system <span style=color:#e6db74>&#34;git commit -m &#39;</span><span style=color:#e6db74>#{</span>message<span style=color:#e6db74>}</span><span style=color:#e6db74>&#39;&#34;</span>
</span></span><span style=display:flex><span>        puts <span style=color:#e6db74>&#34;</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>## Pushing generated </span><span style=color:#e6db74>#{</span>deploy_dir<span style=color:#e6db74>}</span><span style=color:#e6db74> website&#34;</span>
</span></span><span style=display:flex><span>        system <span style=color:#e6db74>&#34;git push heroku </span><span style=color:#e6db74>#{</span>deploy_branch<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>        puts <span style=color:#e6db74>&#34;</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>## Heroku deploy complete&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>end</span> 
</span></span><span style=display:flex><span><span style=color:#66d9ef>end</span>
</span></span></code></pre></div><p>&mldr;then update these variables, (in your Rakefile).</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=display:flex><span>deploy_default <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;heroku&#34;</span>
</span></span><span style=display:flex><span>deploy_branch <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;master&#34;</span>
</span></span><span style=display:flex><span>deploy_dir <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;_heroku&#34;</span>
</span></span></code></pre></div><h2 id=signing-up-for-and-configuring-heroku>Signing up for and Configuring Heroku</h2><p>Now it&rsquo;s time to sign up for a free <a href=https://www.heroku.com/>Heroku</a> account. The Octopress documentation recommends installing the heroku gem, but that&rsquo;s deprecated so download and install the <a href=https://toolbelt.heroku.com/>Heroku Toolbelt</a> instead.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>ssh-keygen <span style=color:#75715e># Generate a public/private key pair</span>
</span></span><span style=display:flex><span>heroku create <span style=color:#75715e># Enter your Heroku credentials</span>
</span></span><span style=display:flex><span>&lt;number_for_public_key&gt; &lt;ENTER&gt;<span style=color:#e6db74>`</span> <span style=color:#75715e># Use the public key that was created when you ran `ssh-keygen`</span>
</span></span><span style=display:flex><span>heroku rename &lt;sitename&gt; <span style=color:#75715e># Also make sure that `url:` in _config.yml matches http://&lt;sitename&gt;.herokuapp.com</span>
</span></span></code></pre></div><p>Now you can do your first deploy to Heroku!</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>cd ~/Sites/&lt;sitename&gt;/_heroku
</span></span><span style=display:flex><span>git init .
</span></span><span style=display:flex><span>git add .
</span></span><span style=display:flex><span>git config branch.master.remote heroku
</span></span><span style=display:flex><span>git commit -am <span style=color:#e6db74>&#34;Initial commit.&#34;</span>
</span></span><span style=display:flex><span>rake generate <span style=color:#f92672>&amp;&amp;</span> rake watch
</span></span><span style=display:flex><span>rake deploy
</span></span></code></pre></div><h2 id=exporting-your-wordpress-posts-and-comments>Exporting your WordPress Posts and Comments</h2><p>Log on to your WordPress Admin and export your content in XML format. You can find this under Tools > Export. Keep this data handy because we&rsquo;ll be using it in the next step.</p><p>The next steps I took were to sign up for a free <a href=http://disqus.com/>Disqus</a> account, install the (Disqus) WordPress plugin, and export my comments to Disqus from the plugin options. This will ensure that your comments are preserved after migrating to Octopress, (as long as your permalinks don&rsquo;t change). Also be sure to add your Disqus shortname to _config.yml.</p><h2 id=importing-your-wordpress-data-into-your-octopress-site>Importing your WordPress data into your Octopress Site</h2><p>There are a number of tools available for importing your WordPress posts into Octopress as Markdown files, but the one I ended up using was <a href=https://github.com/thomasf/exitwp>exitwp</a>. You can follow these steps to import your WordPress site with exitwp.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>brew install python
</span></span><span style=display:flex><span>printf <span style=color:#e6db74>&#39;\nexport PATH=/usr/local/share/python:$PATH&#39;</span> &gt;&gt; ~/.bash_profile
</span></span><span style=display:flex><span>source ~/.bash_profile
</span></span><span style=display:flex><span>pip install virtualenv
</span></span><span style=display:flex><span>pip install virtualenvwrapper
</span></span><span style=display:flex><span>source /usr/local/share/python/virtualenvwrapper.sh
</span></span><span style=display:flex><span>mkvirtualenv --no-site-packages octopress <span style=color:#75715e># Don&#39;t symlink site packages so your environment is more isolated</span>
</span></span><span style=display:flex><span>brew install libyaml
</span></span><span style=display:flex><span>pip install pyyaml
</span></span><span style=display:flex><span>pip install BeautifulSoup4
</span></span><span style=display:flex><span>pip install html2text
</span></span><span style=display:flex><span>cd ~/Documents
</span></span><span style=display:flex><span>git clone https://github.com/thomasf/exitwp
</span></span></code></pre></div><p>Now, copy your WordPress XML files to ~/Documents/exitwp/wordpress-xml, then run <code>xmllint</code> on your export file and address any errors you encounter. You should also customize what you want exported in ~/Documents/exitwp/config.yaml, (e.g., whether or not you want images to be downloaded and included in your build directory). To run the tool type <code>python exitwp.py</code> in the terminal from within the ~/Documents/exitwp directory.</p><p>You should now see your converted site in ~/Documents/exitwp/build, which you can copy to your source directory.</p><h2 id=remove-blog-from-octopress-url>Remove /blog/ from Octopress URL</h2><p>Follow these steps if you don&rsquo;t want /blog/ to appear in your Octopress URL.</p><p>Update the permalink setting in _config.yml.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=display:flex><span><span style=color:#e6db74>permalink</span>: <span style=color:#e6db74>/:year/</span><span style=color:#e6db74>:month</span><span style=color:#f92672>/</span><span style=color:#e6db74>:day</span><span style=color:#f92672>/</span><span style=color:#e6db74>:title</span><span style=color:#f92672>/</span>
</span></span></code></pre></div><p>Move the contents of the blog directory.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>mv ~/Sites/&lt;sitename&gt;/source/blog/archives ~/Sites/&lt;sitename&gt;/source/archives
</span></span><span style=display:flex><span>mv ~/Sites/&lt;sitename&gt;/source/blog/articles/index.html ~/Sites/&lt;sitename&gt;/source/articles/index.html
</span></span><span style=display:flex><span>rm -rf ~/Sites/&lt;sitename/source/blog
</span></span></code></pre></div><p>Update the navigation in source/_includes/custom/navigation.hmtl.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span># Change this
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>li</span>&gt;&lt;<span style=color:#f92672>a</span> <span style=color:#a6e22e>href</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;{{ root_url }}/blog/archives&#34;</span>&gt;Archives&lt;/<span style=color:#f92672>a</span>&gt;&lt;/<span style=color:#f92672>li</span>&gt;
</span></span><span style=display:flex><span># to this
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>li</span>&gt;&lt;<span style=color:#f92672>a</span> <span style=color:#a6e22e>href</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;{{ root_url }}/archives&#34;</span>&gt;Archives&lt;/<span style=color:#f92672>a</span>&gt;&lt;/<span style=color:#f92672>li</span>&gt;
</span></span><span style=display:flex><span># ...and this:
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>li</span>&gt;&lt;<span style=color:#f92672>a</span> <span style=color:#a6e22e>href</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;{{ root_url }}/&#34;</span>&gt;Blog&lt;/<span style=color:#f92672>a</span>&gt;&lt;/<span style=color:#f92672>li</span>&gt;
</span></span><span style=display:flex><span># to this:
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>li</span>&gt;&lt;<span style=color:#f92672>a</span> <span style=color:#a6e22e>href</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;{{ root_url }}/&#34;</span>&gt;Home&lt;/<span style=color:#f92672>a</span>&gt;&lt;/<span style=color:#f92672>li</span>&gt;
</span></span></code></pre></div><p>Update the Archives link in source/index.html.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span># Change this:
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>a</span> <span style=color:#a6e22e>href</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;/blog/archives&#34;</span>&gt;Blog Archives&lt;/<span style=color:#f92672>a</span>&gt;
</span></span><span style=display:flex><span># to this:
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>a</span> <span style=color:#a6e22e>href</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;/archives&#34;</span>&gt;Archives&lt;/<span style=color:#f92672>a</span>&gt;
</span></span></code></pre></div><p>Update the category base URL in _config.yml.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=display:flex><span><span style=color:#75715e># Change this:</span>
</span></span><span style=display:flex><span><span style=color:#e6db74>category_dir</span>: blog<span style=color:#f92672>/</span>categories
</span></span><span style=display:flex><span><span style=color:#75715e># to this:</span>
</span></span><span style=display:flex><span><span style=color:#e6db74>category_dir</span>: category
</span></span><span style=display:flex><span><span style=color:#75715e># ...and this:</span>
</span></span><span style=display:flex><span><span style=color:#e6db74>pagination_dir</span>: blog
</span></span><span style=display:flex><span><span style=color:#75715e># to this:</span>
</span></span><span style=display:flex><span><span style=color:#e6db74>pagination_dir</span>:
</span></span></code></pre></div><p>Update the Archives page title in source/archives/index.html.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=display:flex><span><span style=color:#75715e># Change this:</span>
</span></span><span style=display:flex><span>title <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;On Migrating From Wordpress to Octopress&#34;</span>
</span></span><span style=display:flex><span><span style=color:#75715e># to this:</span>
</span></span><span style=display:flex><span>title <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;On Migrating From Wordpress to Octopress&#34;</span>
</span></span></code></pre></div><h2 id=change-author-name-after-importing-from-wordpress>Change Author Name After Importing from WordPress</h2><p>Another thing that bothered me for a while about my WordPress blog was that the author metadata for posts and pages reflected the &lsquo;admin&rsquo; shortname. This is because I left the default username when initally setting up WordPress years ago. I&rsquo;m sure there&rsquo;s an easy way to change this, but now that my blog consists of plain text files I have the freedom to use whatever tools I choose to make changes. Here&rsquo;s a perfect example of that using find and sed.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>cd ~/Sites/&lt;sitename&gt;/source <span style=color:#f92672>&amp;&amp;</span> find . -name <span style=color:#e6db74>&#34;*.markdown&#34;</span> -print0 | xargs -0 sed -i <span style=color:#e6db74>&#39;&#39;</span> -e <span style=color:#e6db74>&#39;s/author:\ admin/author:\ Forename\ Surname/g&#39;</span>
</span></span></code></pre></div><h2 id=using-google-fonts>Using Google Fonts</h2><p>If you love Google Fonts add this to the top of <code>source/_includes/custom/head.html</code>, (just be sure to use your own favorite fonts!).</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>&lt;<span style=color:#f92672>link</span> <span style=color:#a6e22e>href</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#39;http://fonts.googleapis.com/css?family=Archivo+Narrow:400,700&#39;</span> <span style=color:#a6e22e>rel</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#39;stylesheet&#39;</span>  <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#39;text/css&#39;</span>&gt;
</span></span></code></pre></div><h2 id=prevent-comment-text-from-wrapping-on-small-screens>Prevent Comment Text from Wrapping on Small Screens</h2><p>One of the first things I noticed with the default Octopress theme is that the Disqus comments text that appears above posts was wrapping on smaller screens, which caused it to overlap with the post title. To fix this, I added the following to sass/custom/_styles.scss.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-css data-lang=css><span style=display:flex><span><span style=color:#f92672>article</span> { 
</span></span><span style=display:flex><span>    <span style=color:#960050;background-color:#1e0010>header</span> <span style=color:#960050;background-color:#1e0010>{</span>
</span></span><span style=display:flex><span>        <span style=color:#960050;background-color:#1e0010>p</span> <span style=color:#960050;background-color:#1e0010>{</span>   
</span></span><span style=display:flex><span>            <span style=color:#960050;background-color:#1e0010>&amp;.meta</span> <span style=color:#960050;background-color:#1e0010>{</span>
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>font-size</span>: <span style=color:#ae81ff>.7</span><span style=color:#66d9ef>em</span>;
</span></span><span style=display:flex><span>            }     
</span></span><span style=display:flex><span>        <span style=color:#960050;background-color:#1e0010>}</span>       
</span></span><span style=display:flex><span>    <span style=color:#960050;background-color:#1e0010>}</span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>@<span style=color:#66d9ef>media</span> <span style=color:#f92672>only</span> <span style=color:#f92672>screen</span> <span style=color:#f92672>and</span> <span style=color:#f92672>(</span><span style=color:#f92672>min-width</span><span style=color:#f92672>:</span> <span style=color:#f92672>480px</span><span style=color:#f92672>)</span> {
</span></span><span style=display:flex><span>    <span style=color:#f92672>article</span> {
</span></span><span style=display:flex><span>        <span style=color:#960050;background-color:#1e0010>header</span> <span style=color:#960050;background-color:#1e0010>{</span>
</span></span><span style=display:flex><span>            <span style=color:#960050;background-color:#1e0010>p</span> <span style=color:#960050;background-color:#1e0010>{</span>
</span></span><span style=display:flex><span>                <span style=color:#960050;background-color:#1e0010>&amp;.meta</span> <span style=color:#960050;background-color:#1e0010>{</span>
</span></span><span style=display:flex><span>                    <span style=color:#66d9ef>font-size</span>: <span style=color:#ae81ff>.9</span><span style=color:#66d9ef>em</span>;
</span></span><span style=display:flex><span>                }
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>        <span style=color:#960050;background-color:#1e0010>}</span>   
</span></span><span style=display:flex><span>    <span style=color:#960050;background-color:#1e0010>}</span>   
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>}</span>
</span></span></code></pre></div><h2 id=404>404</h2><p>You might also want a custom 404 page. Fortunately, that&rsquo;s pretty easy too.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>cd ~/Sites/&lt;sitename&gt; <span style=color:#f92672>&amp;&amp;</span> rake new_page<span style=color:#f92672>[</span>404<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>cd source/404
</span></span><span style=display:flex><span>mv index.markdown 404.markdown
</span></span><span style=display:flex><span>mv 404.markdown ../
</span></span><span style=display:flex><span>cd ../
</span></span><span style=display:flex><span>rm -rf <span style=color:#ae81ff>404</span>
</span></span></code></pre></div><p>Then update the yaml front matter in 404.markdown.</p><h2 id=fancybox>Fancybox</h2><p>I followed a post on <a href=http://www.ewal.net/2012/09/08/octopress-customizations/>Ewal.net</a> to get Fancybox working with Octopress. The only difference is that I didn&rsquo;t add a reference to jQuery in the head because it&rsquo;s already present in the default installation of Octopress.</p><p>To add Fancybox support to an image simply add this to your post.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=display:flex><span>{<span style=color:#f92672>%</span> img fancybox <span style=color:#e6db74>/dir/</span>foo<span style=color:#f92672>.</span>jpg <span style=color:#66d9ef>Title</span> <span style=color:#f92672>%</span>}
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#a6e22e>$</span>(<span style=color:#66d9ef>function</span>() {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>$</span>(<span style=color:#e6db74>&#39;.entry-content&#39;</span>).<span style=color:#a6e22e>each</span>(<span style=color:#66d9ef>function</span>(<span style=color:#a6e22e>i</span>){
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>_i</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>i</span>;
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>$</span>(<span style=color:#66d9ef>this</span>).<span style=color:#a6e22e>find</span>(<span style=color:#e6db74>&#39;img.fancybox&#39;</span>).<span style=color:#a6e22e>each</span>(<span style=color:#66d9ef>function</span>(){
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>img</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>$</span>(<span style=color:#66d9ef>this</span>);
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>title</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>img</span>.<span style=color:#a6e22e>attr</span>(<span style=color:#e6db74>&#34;title&#34;</span>);
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>classes</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>img</span>.<span style=color:#a6e22e>attr</span>(<span style=color:#e6db74>&#34;class&#34;</span>);
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>img</span>.<span style=color:#a6e22e>removeAttr</span>(<span style=color:#e6db74>&#34;class&#34;</span>);
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>img</span>.<span style=color:#a6e22e>wrap</span>(<span style=color:#e6db74>&#39;&lt;a href=&#34;&#39;</span><span style=color:#f92672>+</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>src</span><span style=color:#f92672>+</span><span style=color:#e6db74>&#39;&#34; class=&#34;&#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>classes</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;&#34; rel=&#34;gallery&#39;</span><span style=color:#f92672>+</span><span style=color:#a6e22e>_i</span><span style=color:#f92672>+</span><span style=color:#e6db74>&#39;&#34; /   &gt;&#39;</span>);
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>title</span> <span style=color:#f92672>!=</span> <span style=color:#e6db74>&#34;&#34;</span>)
</span></span><span style=display:flex><span>            {
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>img</span>.<span style=color:#a6e22e>parent</span>().<span style=color:#a6e22e>attr</span>(<span style=color:#e6db74>&#34;title&#34;</span>, <span style=color:#a6e22e>title</span>);
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>        });
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>$</span>(<span style=color:#e6db74>&#39;.fancybox&#39;</span>).<span style=color:#a6e22e>fancybox</span>();
</span></span><span style=display:flex><span>});
</span></span></code></pre></div><h2 id=open-vim-when-running-rake-new_post-and-make-new-posts-un-published-by-default>Open Vim when running rake new_post and make new posts un-published by default</h2><p>Add the following to your Rakefile if you want <code>rake new_post</code> to open in your editor and new posts to be un-published by default. Replace Vim with your favorite editor if you dare. :)</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=display:flex><span>desc <span style=color:#e6db74>&#34;Begin a new post in </span><span style=color:#e6db74>#{</span>source_dir<span style=color:#e6db74>}</span><span style=color:#e6db74>/</span><span style=color:#e6db74>#{</span>posts_dir<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>task <span style=color:#e6db74>:new_post</span>, <span style=color:#e6db74>:title</span> <span style=color:#66d9ef>do</span> <span style=color:#f92672>|</span>t, args<span style=color:#f92672>|</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> args<span style=color:#f92672>.</span>title
</span></span><span style=display:flex><span>        title <span style=color:#f92672>=</span> args<span style=color:#f92672>.</span>title
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>else</span>
</span></span><span style=display:flex><span>        title <span style=color:#f92672>=</span> get_stdin(<span style=color:#e6db74>&#34;Enter a title for your post: &#34;</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>end</span> 
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>raise</span> <span style=color:#e6db74>&#34;### You haven&#39;t set anything up yet. First run `rake install` to set up an    Octopress theme. &#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>unless</span> <span style=color:#66d9ef>File</span><span style=color:#f92672>.</span>directory?(source_dir)
</span></span><span style=display:flex><span>    mkdir_p <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>#{</span>source_dir<span style=color:#e6db74>}</span><span style=color:#e6db74>/</span><span style=color:#e6db74>#{</span>posts_dir<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>    filename <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>#{</span>source_dir<span style=color:#e6db74>}</span><span style=color:#e6db74>/</span><span style=color:#e6db74>#{</span>posts_dir<span style=color:#e6db74>}</span><span style=color:#e6db74>/</span><span style=color:#e6db74>#{</span><span style=color:#66d9ef>Time</span><span style=color:#f92672>.</span>now<span style=color:#f92672>.</span>strftime(<span style=color:#e6db74>&#39;%Y-%m-%d&#39;</span>)<span style=color:#e6db74>}</span><span style=color:#e6db74>-</span><span style=color:#e6db74>#{</span>title<span style=color:#f92672>.</span>     to_url<span style=color:#e6db74>}</span><span style=color:#e6db74>. </span><span style=color:#e6db74>#{</span>new_post_ext<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> <span style=color:#66d9ef>File</span><span style=color:#f92672>.</span>exist?(filename)
</span></span><span style=display:flex><span>        abort(<span style=color:#e6db74>&#34;rake aborted!&#34;</span>) <span style=color:#66d9ef>if</span> ask(<span style=color:#e6db74>&#34;</span><span style=color:#e6db74>#{</span>filename<span style=color:#e6db74>}</span><span style=color:#e6db74> already exists. Do you want to        overwrite?&#34;</span>, <span style=color:#f92672>[</span><span style=color:#e6db74>&#39;y&#39;</span>, <span style=color:#e6db74>&#39;n&#39;</span><span style=color:#f92672>]</span>) <span style=color:#f92672>==</span> <span style=color:#e6db74>&#39;n&#39;</span> 
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>end</span> 
</span></span><span style=display:flex><span>    puts <span style=color:#e6db74>&#34;Creating new post: </span><span style=color:#e6db74>#{</span>filename<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>    open(filename, <span style=color:#e6db74>&#39;w&#39;</span>) <span style=color:#66d9ef>do</span> <span style=color:#f92672>|</span>post<span style=color:#f92672>|</span>
</span></span><span style=display:flex><span>        post<span style=color:#f92672>.</span>puts <span style=color:#e6db74>&#34;---&#34;</span>
</span></span><span style=display:flex><span>        post<span style=color:#f92672>.</span>puts <span style=color:#e6db74>&#34;layout: post&#34;</span>
</span></span><span style=display:flex><span>        post<span style=color:#f92672>.</span>puts <span style=color:#e6db74>&#34;title: </span><span style=color:#ae81ff>\&#34;</span><span style=color:#e6db74>#{</span>title<span style=color:#f92672>.</span>gsub(<span style=color:#e6db74>/&amp;/</span>,<span style=color:#e6db74>&#39;&amp;amp;&#39;</span>)<span style=color:#e6db74>}</span><span style=color:#ae81ff>\&#34;</span><span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>        post<span style=color:#f92672>.</span>puts <span style=color:#e6db74>&#34;date: </span><span style=color:#e6db74>#{</span><span style=color:#66d9ef>Time</span><span style=color:#f92672>.</span>now<span style=color:#f92672>.</span>strftime(<span style=color:#e6db74>&#39;%Y-%m-%d %H:%M&#39;</span>)<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>        post<span style=color:#f92672>.</span>puts <span style=color:#e6db74>&#34;published: false&#34;</span>
</span></span><span style=display:flex><span>        post<span style=color:#f92672>.</span>puts <span style=color:#e6db74>&#34;comments: true&#34;</span>
</span></span><span style=display:flex><span>        post<span style=color:#f92672>.</span>puts <span style=color:#e6db74>&#34;categories: &#34;</span>
</span></span><span style=display:flex><span>        post<span style=color:#f92672>.</span>puts <span style=color:#e6db74>&#34;---&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span>    system <span style=color:#e6db74>&#34;vim </span><span style=color:#ae81ff>\&#34;</span><span style=color:#e6db74>#{</span>filename<span style=color:#e6db74>}</span><span style=color:#ae81ff>\&#34;</span><span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>end</span>
</span></span></code></pre></div><h2 id=finalize-dns>Finalize DNS</h2><p>The last step for me was to transfer my DNS records from Amazon Route 53 to <a href=https://hover.com/9xKyPPEu>Hover</a>, (my registrar). Heroku has a <a href=https://devcenter.heroku.com/articles/custom-domains>farily detailed article</a> on using custom domains, so I recommend reading that.</p><p>Here are the relevant Heroku commands. Don’t forget to update the <code>url:</code> in _config.yml one last time, (e.g., remove herokuapp from URL).</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>cd ~/Sites/&lt;sitename&gt;/_heroku <span style=color:#f92672>&amp;&amp;</span> heroku domains:add &lt;sitename&gt;.com
</span></span><span style=display:flex><span>heroku domains:add www.&lt;sitename&gt;.com
</span></span></code></pre></div><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p>Yes, I spelled that correctly. Google it.&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div></div></article><div id=footer-post-container><div id=footer-post><div id=nav-footer style=display:none><ul><li><a href=/>Home</a></li><li><a href=/about/>About</a></li><li><a href=/post/>Blog</a></li><li><a href=/projects/>Projects</a></li><li><a href=/research/>Research</a></li><li><a href=/talks/>Talks</a></li></ul></div><div id=toc-footer style=display:none><nav id=TableOfContents><ul><li><a href=#prepping-your-environment>Prepping Your Environment</a></li><li><a href=#setting-up-your-local-sites-directory-and-installing-octopress>Setting Up Your Local ~/Sites Directory and Installing Octopress</a></li><li><a href=#use-rack-rewrite-for-redirects>Use rack-rewrite for Redirects</a></li><li><a href=#create-_heroku-directory-for-deployment>Create _heroku Directory for Deployment</a></li><li><a href=#signing-up-for-and-configuring-heroku>Signing up for and Configuring Heroku</a></li><li><a href=#exporting-your-wordpress-posts-and-comments>Exporting your WordPress Posts and Comments</a></li><li><a href=#importing-your-wordpress-data-into-your-octopress-site>Importing your WordPress data into your Octopress Site</a></li><li><a href=#remove-blog-from-octopress-url>Remove /blog/ from Octopress URL</a></li><li><a href=#change-author-name-after-importing-from-wordpress>Change Author Name After Importing from WordPress</a></li><li><a href=#using-google-fonts>Using Google Fonts</a></li><li><a href=#prevent-comment-text-from-wrapping-on-small-screens>Prevent Comment Text from Wrapping on Small Screens</a></li><li><a href=#404>404</a></li><li><a href=#fancybox>Fancybox</a></li><li><a href=#open-vim-when-running-rake-new_post-and-make-new-posts-un-published-by-default>Open Vim when running rake new_post and make new posts un-published by default</a></li><li><a href=#finalize-dns>Finalize DNS</a></li></ul></nav></div><div id=share-footer style=display:none><ul><li><a class=icon href="http://www.facebook.com/sharer.php?u=https%3a%2f%2feverythingisgray.com%2f2013%2f06%2f15%2fon-migrating-from-wordpress-to-octopress%2f" aria-label=Facebook><i class="fab fa-facebook fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://twitter.com/share?url=https%3a%2f%2feverythingisgray.com%2f2013%2f06%2f15%2fon-migrating-from-wordpress-to-octopress%2f&text=On%20Migrating%20From%20WordPress%20to%20Octopress" aria-label=Twitter><i class="fab fa-twitter fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2feverythingisgray.com%2f2013%2f06%2f15%2fon-migrating-from-wordpress-to-octopress%2f&title=On%20Migrating%20From%20WordPress%20to%20Octopress" aria-label=Linkedin><i class="fab fa-linkedin fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2feverythingisgray.com%2f2013%2f06%2f15%2fon-migrating-from-wordpress-to-octopress%2f&is_video=false&description=On%20Migrating%20From%20WordPress%20to%20Octopress" aria-label=Pinterest><i class="fab fa-pinterest fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="mailto:?subject=On%20Migrating%20From%20WordPress%20to%20Octopress&body=Check out this article: https%3a%2f%2feverythingisgray.com%2f2013%2f06%2f15%2fon-migrating-from-wordpress-to-octopress%2f" aria-label=Email><i class="fas fa-envelope fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://getpocket.com/save?url=https%3a%2f%2feverythingisgray.com%2f2013%2f06%2f15%2fon-migrating-from-wordpress-to-octopress%2f&title=On%20Migrating%20From%20WordPress%20to%20Octopress" aria-label=Pocket><i class="fab fa-get-pocket fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://reddit.com/submit?url=https%3a%2f%2feverythingisgray.com%2f2013%2f06%2f15%2fon-migrating-from-wordpress-to-octopress%2f&title=On%20Migrating%20From%20WordPress%20to%20Octopress" aria-label=reddit><i class="fab fa-reddit fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://www.tumblr.com/share/link?url=https%3a%2f%2feverythingisgray.com%2f2013%2f06%2f15%2fon-migrating-from-wordpress-to-octopress%2f&name=On%20Migrating%20From%20WordPress%20to%20Octopress&description=%3cp%3eHaving%20recently%20made%20the%20decision%20to%20migrate%20my%20blog%20from%20WordPress%20to%20%3ca%20href%3d%22http%3a%2f%2foctopress.org%2f%22%3eOctopress%3c%2fa%3e%20I%20decided%20I%20would%20share%20my%20findings%20in%20hopes%20that%20someone%20else%20will%20benefit%20from%20them%2c%20and%20so%20I%20can%20refer%20back%20to%20this%20post%20should%20I%20need%20to%20do%20something%20similar%20in%20the%20future.%3c%2fp%3e%0a%3cp%3eThe%20primary%20reason%20I%20decided%20to%20move%20to%20a%20statically%20generated%20site%20is%20because%20I%20found%20myself%20spending%20more%20time%20worrying%20about%20whether%20my%20site%20was%20running%20and%20was%20secure%20than%20I%20did%20writing.%20My%20site%20was%20hacked%20last%20year%20because%20I%20was%20running%20an%20outdated%20version%20of%20WordPress%2c%20and%20since%20moving%20to%20a%20new%20host%2c%20%28Amazon%20EC2%29%2c%20I%20have%20frequently%20had%20to%20restart%20MySQL%20and%20Apache%20just%20to%20keep%20the%20site%20up.%20This%20could%20be%20partially%20due%20to%20the%20fact%20that%20I%20was%20running%20the%20site%20on%20a%20%3ca%20href%3d%22http%3a%2f%2fdocs.aws.amazon.com%2fAWSEC2%2flatest%2fUserGuide%2fconcepts_micro_instances.html%22%3emicro%20instance%3c%2fa%3e%2c%20but%20now%20that%20my%20blog%20is%20static%20I%20don%26rsquo%3bt%20have%20to%20worry%20about%20that%20any%20longer.%20Another%20reason%20why%20I%20chose%20Octopress%20for%20my%20blogging%20platform%20is%20that%20I%20like%20to%20tinker%2c%20and%20being%20able%20to%20use%20tools%20that%20I%26rsquo%3bm%20already%20familiar%20with%20and%20use%20every%20day%20was%20a%20huge%20plus%2c%20%28Vim%2c%20Git%2c%20and%20Markdown%2c%20specifically%29.%3c%2fp%3e" aria-label=Tumblr><i class="fab fa-tumblr fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2feverythingisgray.com%2f2013%2f06%2f15%2fon-migrating-from-wordpress-to-octopress%2f&t=On%20Migrating%20From%20WordPress%20to%20Octopress" aria-label="Hacker News"><i class="fab fa-hacker-news fa-lg" aria-hidden=true></i></a></li></ul></div><div id=actions-footer><a id=menu-toggle class=icon href=# onclick='return $("#nav-footer").toggle(),!1' aria-label=Menu><i class="fas fa-bars fa-lg" aria-hidden=true></i> Menu</a>
<a id=toc-toggle class=icon href=# onclick='return $("#toc-footer").toggle(),!1' aria-label=TOC><i class="fas fa-list fa-lg" aria-hidden=true></i> TOC</a>
<a id=share-toggle class=icon href=# onclick='return $("#share-footer").toggle(),!1' aria-label=Share><i class="fas fa-share-alt fa-lg" aria-hidden=true></i> share</a>
<a id=top style=display:none class=icon href=# onclick='$("html, body").animate({scrollTop:0},"fast")' aria-label="Top of Page"><i class="fas fa-chevron-up fa-lg" aria-hidden=true></i> Top</a></div></div></div><footer id=footer><div class=footer-left>Copyright &copy; 2024 James Barclay</div><div class=footer-right><nav><ul><li><a href=/>Home</a></li><li><a href=/about/>About</a></li><li><a href=/post/>Blog</a></li><li><a href=/projects/>Projects</a></li><li><a href=/research/>Research</a></li><li><a href=/talks/>Talks</a></li></ul></nav></div></footer></div></body><link rel=stylesheet href=/lib/font-awesome/css/all.min.css><script src=/lib/jquery/jquery.min.js></script><script src=/js/main.js></script></html>